window.__require=function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var r=a.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+a+"'")}}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return o(e[a][1][t]||t)},u,u.exports,t,e,n,i)}return n[a].exports}for(var c="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({ActivityNode:[function(t,e,n){"use strict";cc._RF.push(e,"646d48as/9G+7Xm4OTC2d5w","ActivityNode"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,c=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e}return __extends(e,t),e.prototype.onEnable=function(){cc.log("=> ActivityNode Enabled"),this.icon.stopAllActions(),this.icon.runAction(cc.repeatForever(cc.rotateBy(.3,-90)))},e.prototype.onDisable=function(){cc.log("=> ActivityNode Disable"),this.icon.stopAllActions()},__decorate([c(cc.Node)],e.prototype,"icon",void 0),e=__decorate([o],e)}(cc.Component);n.default=a,cc._RF.pop()},{}],AnalyticsUtils:[function(t,e,n){"use strict";cc._RF.push(e,"7ca6dI9/tZN1Y74DVpxcJiK","AnalyticsUtils"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.trackPageAppear=function(t){cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AnalyticsUtils","trackPageAppear:",JSON.stringify({page:t}))},t.trackPageDisappear=function(t){cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AnalyticsUtils","trackPageDisappear:",JSON.stringify({page:t}))},t.trackEvent=function(t,e){cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AnalyticsUtils","trackEvent:",JSON.stringify({name:t,properties:e}))},t.trackEventDurationBegin=function(t){cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AnalyticsUtils","trackEventDurationBegin:",JSON.stringify({name:t}))},t.trackEventDurationEnd=function(t){cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AnalyticsUtils","trackEventDurationEnd:",JSON.stringify({name:t}))},t.trackEventWithDuration=function(t,e){cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AnalyticsUtils","trackEventWithDuration:",JSON.stringify({name:t,duration:e}))},t}();n.default=i,cc._RF.pop()},{}],AnswersConstants:[function(t,e,n){"use strict";cc._RF.push(e,"834aekhaINNBIUbm0Z8LKpj","AnswersConstants"),Object.defineProperty(n,"__esModule",{value:!0}),n.default={STORAGE_KEYS:{SHOW_COUNT:"SHOW_COUNT",IS_EVALUATE:"IS_EVALUATE",EVALUATE_TIME:"EVALUATE_TIME"},EVALUATE:{SHOW_COUNT_MAX:10,EVALUATE_TIME_MAX:7776e6},APP:{APPLE_APP_ID:"1446266225",CAPTURE_SCREEN_FILE_NAME:"tmp_capture_screen.png"},EVENT:{CHANGE_IS_EVALUATE:"CHANGE_IS_EVALUATE"}},cc._RF.pop()},{}],AnswersDictionary:[function(t,e,n){"use strict";cc._RF.push(e,"ad8ebZFyHVAjJUCDnoqIoJA","AnswersDictionary"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t){this.m_arrayText=[],this.m_dictText={},this.m_arrayText=this.splitRawdata(t);for(var e=0,n=this.m_arrayText;e<n.length;e++){var i=n[e];this.m_dictText[i]=!0}}return t.prototype.randomText=function(){var t=parseInt((this.m_arrayText.length*Math.random()).toString());cc.log("=> index = "+t);var e=this.m_arrayText[t];return cc.log("=> text = "+e),e.replace("|","\n")},t.prototype.patch=function(t){for(var e=0,n=this.splitRawdata(t);e<n.length;e++){var i=n[e];this.m_dictText[i]||(this.m_arrayText.push(i),this.m_dictText[i]=!0)}},t.prototype.splitRawdata=function(t){var e=t.split(";\n");return 1===e.length&&(e=t.split(";\r\n")),e},t}();n.default=i,cc._RF.pop()},{}],App:[function(t,e,n){"use strict";cc._RF.push(e,"0f7273295hMlZjNQ3c7cH5Z","App"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./AnswersDictionary"),o=t("./AnswersConstants"),c=t("./utils/i18n/Localized"),a=null,s=function(){function t(){this.m_isInit=!1,this.m_answersDictionary=null,this.m_showCount=0,this.m_isEvaluate=!1,this.m_evaluateTime=null,this.mainNode=null,this.bottomNode=null,this.middleNode=null,this.topNode=null,this.activityNode=null}return t.getInstance=function(){return null===a&&(a=new t),a},Object.defineProperty(t.prototype,"answersDictionary",{get:function(){return this.m_answersDictionary},enumerable:!0,configurable:!0}),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){return this.m_isInit?[2]:(this.m_isInit=!0,[2,new Promise(function(e,n){return __awaiter(t,void 0,void 0,function(){var t,a=this;return __generator(this,function(s){switch(s.label){case 0:return[4,c.default.getLanguage()];case 1:return t=s.sent(),cc.loader.loadRes("configs/answers-"+t,function(c,s){if(c)n(c);else{if(a.m_answersDictionary=new i.default(s.text),cc.loader.load({url:"http://www.qxqplant.com/answers/configs/answers-patch-"+t+".txt"},function(t,e){t?cc.log(t):a.m_answersDictionary.patch(e)}),a.m_showCount=cc.sys.localStorage.getItem(o.default.STORAGE_KEYS.SHOW_COUNT),a.m_showCount||(a.m_showCount=0),a.m_isEvaluate=cc.sys.localStorage.getItem(o.default.STORAGE_KEYS.IS_EVALUATE),a.m_isEvaluate){var r=cc.sys.localStorage.getItem(o.default.STORAGE_KEYS.EVALUATE_TIME);r&&(a.m_evaluateTime=parseInt(r))}else a.m_isEvaluate=!1;e()}}),[2]}})})})])})})},Object.defineProperty(t.prototype,"showCount",{get:function(){return this.m_showCount},set:function(t){this.m_showCount=t,cc.sys.localStorage.setItem(o.default.STORAGE_KEYS.SHOW_COUNT,this.m_showCount)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEvaluate",{get:function(){return this.m_isEvaluate},set:function(t){this.m_isEvaluate=t,cc.sys.localStorage.setItem(o.default.STORAGE_KEYS.IS_EVALUATE,this.m_isEvaluate),this.m_isEvaluate?(this.m_evaluateTime=cc.sys.now(),cc.sys.localStorage.setItem(o.default.STORAGE_KEYS.EVALUATE_TIME,this.m_evaluateTime)):(this.m_evaluateTime=null,cc.sys.localStorage.removeItem(o.default.STORAGE_KEYS.EVALUATE_TIME)),cc.director.emit(o.default.EVENT.CHANGE_IS_EVALUATE)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isShowEvaluate",{get:function(){if(this.isEvaluate){if(this.m_evaluateTime&&cc.sys.now()-this.m_evaluateTime>=o.default.EVALUATE.EVALUATE_TIME_MAX)return!0}else if(this.showCount>=o.default.EVALUATE.SHOW_COUNT_MAX)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{set:function(t){this.activityNode.active=t},enumerable:!0,configurable:!0}),t}();n.default=s,cc._RF.pop()},{"./AnswersConstants":"AnswersConstants","./AnswersDictionary":"AnswersDictionary","./utils/i18n/Localized":"Localized"}],ButtonUtils:[function(t,e,n){"use strict";cc._RF.push(e,"b095atrx/9KvoCEyxms8WOY","ButtonUtils"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc.color(128,128,128),o=cc.Color.WHITE,c=function(){function t(){}return t.onColor=function(t,e){if(e){var n=t.node.getChildByName(e);t.node.on(cc.Node.EventType.TOUCH_START,function(){n&&(n.color=i)}),t.node.on(cc.Node.EventType.TOUCH_END,function(){n&&(n.color=o)})}else t.node.on(cc.Node.EventType.TOUCH_START,function(){for(var e=0,n=t.node.children;e<n.length;e++){n[e].color=i}}),t.node.on(cc.Node.EventType.TOUCH_END,function(){for(var e=0,n=t.node.children;e<n.length;e++){n[e].color=o}})},t.offColor=function(t){t.node.off(cc.Node.EventType.TOUCH_START),t.node.off(cc.Node.EventType.TOUCH_END)},t}();n.default=c,cc._RF.pop()},{}],DeveloperInfo:[function(t,e,n){"use strict";cc._RF.push(e,"fe083DNndBI1KEZ1mcIwEVf","DeveloperInfo"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,c=i.property,a=t("../App"),s=t("../native/NativeResponse"),r=t("../native/AnalyticsUtils"),l=t("../utils/Utils"),u=t("../utils/i18n/Localized"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelWebsite=null,e.labelEmail=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;r.default.trackEvent("DevelopInfoPage");var e=cc.find("bg/btnDonate",this.node);e.angle=0;var n=[];n.push(cc.rotateTo(.8,-18).easing(cc.easeOut(3))),n.push(cc.rotateTo(.45,0).easing(cc.easeElasticOut(.3))),n.push(cc.delayTime(1.618)),e.runAction(cc.repeatForever(cc.sequence(n)));var i=!1;this.node.on(cc.Node.EventType.TOUCH_START,function(){i=!0}),this.node.on(cc.Node.EventType.TOUCH_END,function(){i&&(i=!1,t.hide())}),this.show()},e.prototype.onDestroy=function(){},e.prototype.show=function(){var t=this.node.getChildByName("bg");t.stopAllActions(),t.y=-t.getContentSize().height,t.runAction(cc.moveBy(.1,0,t.getContentSize().height))},e.prototype.hide=function(){var t=this,e=this.node.getChildByName("bg");e.stopAllActions(),e.y=0,e.runAction(cc.sequence([cc.moveBy(.1,0,-e.getContentSize().height),cc.callFunc(function(){t.node.destroy()})]))},e.prototype.onClickPurchase=function(){cc.loader.loadRes("prefabs/purchaseInfo",cc.Prefab,function(t,e){if(!t){var n=cc.instantiate(e);a.default.getInstance().topNode.addChild(n)}})},e.prototype.onClickCopyEmail=function(){cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("QXQUtils","copyText:",JSON.stringify({text:this.labelEmail.string,callback:s.default.push(function(){l.default.showAlert("",u.default.getValue("#copy_email_success_content"),[u.default.getValue("#btn_confirm")])})}))},e.prototype.onClickCopyWebsite=function(){cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("QXQUtils","copyText:",JSON.stringify({text:this.labelWebsite.string,callback:s.default.push(function(){l.default.showAlert("",u.default.getValue("#copy_website_success_content"),[u.default.getValue("#btn_confirm")])})}))},e.prototype.onClickGoWebsite=function(){cc.sys.openURL(this.labelWebsite.string)},e.prototype.onClickSendEmail=function(){var t=u.default.getValue("#mail_subject_feedback"),e="\n\n\n\n\n\n"+u.default.getValue("#mail_content_thanks");cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("QXQUtils","sendEmail:",JSON.stringify({subject:t,toRecipients:[this.labelEmail.string],content:e,callback:s.default.push(function(t){cc.log("=> "+t)})})):cc.sys.isBrowser&&(window.location.href="mailto:"+this.labelEmail.string+"?subject="+t+"&body="+e)},__decorate([c(cc.Label)],e.prototype,"labelWebsite",void 0),__decorate([c(cc.Label)],e.prototype,"labelEmail",void 0),e=__decorate([o],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../App":"App","../native/AnalyticsUtils":"AnalyticsUtils","../native/NativeResponse":"NativeResponse","../utils/Utils":"Utils","../utils/i18n/Localized":"Localized"}],EvaluateAnimation:[function(t,e,n){"use strict";cc._RF.push(e,"01e9byfRKNBR5N7Uqr43mdZ","EvaluateAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.node.runAction(cc.sequence([cc.rotateBy(.3,-8).easing(cc.easeSineOut()),cc.callFunc(function(){var e=[];e.push(cc.rotateBy(.8,16).easing(cc.easeSineInOut())),e.push(cc.rotateBy(.8,-16).easing(cc.easeSineInOut())),t.node.runAction(cc.repeatForever(cc.sequence(e)))})]))},e=__decorate([o],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],LocalizedDictionary:[function(t,e,n){"use strict";cc._RF.push(e,"75d39HbqLhFpqt8R4jeLXJy","LocalizedDictionary"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){cc.sys.language}return t.getInstance=function(){return this.s_instance||(this.s_instance=new t),this.s_instance},t.s_instance=null,t}();n.default=i,cc._RF.pop()},{}],Localized:[function(t,e,n){"use strict";cc._RF.push(e,"a58978DCLZJBpfIdtk+nexh","Localized"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../native/NativeResponse"),o=function(){function t(){}return t.getLanguage=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){return this.s_language?[2,this.s_language]:cc.sys.isBrowser?(this.s_language=this.process(window.navigator.language),[2,Promise.resolve(this.s_language)]):cc.sys.os===cc.sys.OS_IOS?[2,new Promise(function(e,n){jsb.reflection.callStaticMethod("QXQUtils","getLanguage:",JSON.stringify({callback:i.default.push(function(n){t.s_language=t.process(n),e(t.s_language)})}))})]:(this.s_language="en",[2,Promise.resolve(this.s_language)])})})},t.init=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,i=this;return __generator(this,function(o){switch(o.label){case 0:return[4,this.getLanguage()];case 1:return t=o.sent(),e=new Promise(function(e,n){return __awaiter(i,void 0,void 0,function(){var i=this;return __generator(this,function(o){return cc.loader.loadRes("configs/localized-"+t,function(t,o){t?n():(i.s_dict=o.json,e())}),[2]})})}),n=new Promise(function(t,e){cc.loader.loadRes("configs/localized-en",function(n,o){n?e():(i.s_defaultDict=o.json,t())})}),[2,e.then(function(){return n}).catch(function(){return n})]}})})},t.getValue=function(t){var e=this.s_dict[t];return e||(e=this.s_defaultDict[t])?e:t},t.localizeLabel=function(t){t.string=this.getValue(t.string)},t.process=function(t){return t=t.toLocaleLowerCase(),cc.log("=> process value = "+t),-1!==t.indexOf("zh-hant")?"zh-hant":-1!==t.indexOf("zh-hans")?"zh-hans":-1!==t.indexOf("zh-tw")||-1!==t.indexOf("zh-hk")?"zh-hant":-1!==t.indexOf("zh-cn")?"zh-hans":"zh"===t?"zh-hans":"en"},t.s_language=null,t.s_dict={},t.s_defaultDict={},t}();n.default=o,cc._RF.pop()},{"../../native/NativeResponse":"NativeResponse"}],MainNode:[function(t,e,n){"use strict";cc._RF.push(e,"a72890dFfFFEaHRVbXFeo3e","MainNode"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,c=i.property,a=t("./App"),s=t("./utils/ButtonUtils"),r=t("./utils/Utils"),l=t("./native/NativeResponse"),u=t("./AnswersConstants"),d=t("./native/AnalyticsUtils"),f=t("./utils/i18n/Localized"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelAnswer=null,e.btnInfo=null,e.btnEvaluate=null,e.btnShare=null,e.activityNode=null,e}return __extends(e,t),e.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,i,o,c,r=this;return __generator(this,function(l){switch(l.label){case 0:return cc.sys.isNative?(t=cc.log,cc.log=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.apply(void 0,[e].concat(n)),console.log.apply(console,[e].concat(n))},jsb.onHide=function(){cc.log("=> onHide")},jsb.onShow=function(){cc.log("=> onShow"),r.showAnswer()}):this.btnShare.active=!1,cc.log("=> Localized start init"),[4,f.default.init()];case 1:return l.sent(),cc.log("=> Localized finish init"),n=(e=cc).log,i="=> current language = ",[4,f.default.getLanguage()];case 2:return n.apply(e,[i+l.sent()]),[4,f.default.getLanguage()];case 3:return"en"===l.sent()&&(this.labelAnswer.fontSize=36,o=this.labelAnswer.node.getContentSize(),this.labelAnswer.node.setContentSize(520,o.height)),cc.log("=> App start init"),[4,a.default.getInstance().init()];case 4:return l.sent(),cc.log("=> App finish init"),(c=a.default.getInstance()).mainNode=this.node,c.bottomNode=this.node.getChildByName("bottomNode"),c.middleNode=this.node.getChildByName("middleNode"),c.topNode=this.node.getChildByName("topNode"),c.activityNode=this.activityNode,s.default.onColor(this.btnInfo.getComponent(cc.Button),"icon"),s.default.onColor(this.btnShare.getComponent(cc.Button),"icon"),this.onChangeIsEvaluate=this.onChangeIsEvaluate.bind(this),cc.director.on(u.default.EVENT.CHANGE_IS_EVALUATE,this.onChangeIsEvaluate),this.showAnswer(),[2]}})})},e.prototype.onDestroy=function(){cc.director.off(u.default.EVENT.CHANGE_IS_EVALUATE,this.onChangeIsEvaluate),s.default.offColor(this.btnInfo.getComponent(cc.Button)),s.default.offColor(this.btnShare.getComponent(cc.Button))},e.prototype.showAnswer=function(){var t=this,e=a.default.getInstance().answersDictionary.randomText();this.labelAnswer.string=e,d.default.trackEvent("ShowAnswerPage"),this.labelAnswer.node.stopAllActions(),this.labelAnswer.node.opacity=0;var n=[];n.push(cc.fadeIn(4)),n.push(cc.delayTime(20)),n.push(cc.fadeOut(4)),this.labelAnswer.node.runAction(cc.sequence(n)),++a.default.getInstance().showCount,cc.sys.isNative&&(this.btnEvaluate.active=a.default.getInstance().isShowEvaluate),cc.sys.isNative&&(this.btnShare.stopAllActions(),this.btnShare.active=!0,this.btnShare.runAction(cc.sequence([cc.delayTime(28),cc.callFunc(function(){return t.btnShare.active=!1})])))},e.prototype.onClickInfo=function(){cc.sys.isBrowser?this.showAnswer():this.showDevelopInfo()},e.prototype.onClickEvaluate=function(){cc.log("=> onClickEvaluate"),cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("QXQUtils","showEvaluate:",JSON.stringify({appId:u.default.APP.APPLE_APP_ID,isUseAppStore:!1,callback:l.default.push(function(t){cc.log("=> "+t),"finish"===JSON.parse(t).state&&(a.default.getInstance().isEvaluate=!0)})})):a.default.getInstance().isEvaluate=!0},e.prototype.onClickShare=function(){d.default.trackEvent("ShareStart");var t=jsb.fileUtils.getWritablePath()+u.default.APP.CAPTURE_SCREEN_FILE_NAME,e=this.labelAnswer.node.opacity;this.labelAnswer.node.opacity=255,r.default.captureScreen(a.default.getInstance().bottomNode,t)?(cc.log("=> \u622a\u56fe\u6210\u529f"),jsb.reflection.callStaticMethod("AppleShare","shareImage:",JSON.stringify({path:t,callback:l.default.push(function(t){JSON.parse(t).result&&d.default.trackEvent("ShareFinish")})}))):d.default.trackEvent("ShareCaptureScreenFailed"),this.labelAnswer.node.opacity=e},e.prototype.showDevelopInfo=function(){var t=a.default.getInstance().topNode.getChildByName("developerInfo");t&&a.default.getInstance().topNode.removeChild(t),cc.loader.loadRes("prefabs/developerInfo",cc.Prefab,function(t,e){var n=cc.instantiate(e);n.y=.5*-cc.winSize.height,a.default.getInstance().topNode.addChild(n,0,"developerInfo")})},e.prototype.onChangeIsEvaluate=function(){cc.sys.isNative&&(this.btnEvaluate.active=a.default.getInstance().isShowEvaluate)},__decorate([c(cc.Label)],e.prototype,"labelAnswer",void 0),__decorate([c(cc.Node)],e.prototype,"btnInfo",void 0),__decorate([c(cc.Node)],e.prototype,"btnEvaluate",void 0),__decorate([c(cc.Node)],e.prototype,"btnShare",void 0),__decorate([c(cc.Node)],e.prototype,"activityNode",void 0),e=__decorate([o],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./AnswersConstants":"AnswersConstants","./App":"App","./native/AnalyticsUtils":"AnalyticsUtils","./native/NativeResponse":"NativeResponse","./utils/ButtonUtils":"ButtonUtils","./utils/Utils":"Utils","./utils/i18n/Localized":"Localized"}],NativeResponse:[function(t,e,n){"use strict";cc._RF.push(e,"bb99d/1zUNIBprvkgTZ93/H","NativeResponse"),Object.defineProperty(n,"__esModule",{value:!0});var i=0,o={},c=function(){function t(){}return t.push=function(t){var e=++i;return o[e]=t,e},t}();n.default=c,cc.sys.isNative&&(jsb.onNativeResponse||(jsb.onNativeResponse=function(t,e,n){if(void 0===n&&(n=!0),null===e||void 0===e)delete o[t];else{var i=o[t];i&&(i(e),n&&delete o[t])}})),cc._RF.pop()},{}],PurchaseInfo:[function(t,e,n){"use strict";cc._RF.push(e,"7679bwXhqFJ64V1HS5tD3Ki","PurchaseInfo"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,c=i.property,a=t("../native/AnalyticsUtils"),s=t("../utils/i18n/Localized"),r=t("../native/NativeResponse"),l=t("../App"),u=t("../utils/Utils"),d=["com.qxqplant.answers.water","com.qxqplant.answers.coffee","com.qxqplant.answers.noodles"],f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelClose=null,e.btnDonateWater=null,e.btnDonateCoffee=null,e.btnDonateNoodles=null,e.m_buttons=[],e.m_products=[],e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;a.default.trackEvent("PurchaseInfoPage"),s.default.localizeLabel(this.labelTitle),s.default.localizeLabel(this.labelClose),this.m_buttons=[this.btnDonateWater,this.btnDonateCoffee,this.btnDonateNoodles],this.initButtons(this.m_buttons),cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&(l.default.getInstance().active=!0,jsb.reflection.callStaticMethod("ApplePayUtils","init:",JSON.stringify({callback:r.default.push(function(e){var n=JSON.parse(e);if("updated"===n.action)if("purchased"===n.state){l.default.getInstance().active=!1;var i=t.findProduct(n.payment.productIdentifier);i?u.default.showAlert(s.default.getValue("#purchase_success_title"),i.localizedDescription,[s.default.getValue("#btn_confirm")]):u.default.showAlert(s.default.getValue("#purchase_success_title"),"",[s.default.getValue("#btn_confirm")])}else"failed"===n.state&&(l.default.getInstance().active=!1,u.default.showAlert(s.default.getValue("#purchase_failed_title"),n.err,[s.default.getValue("#btn_confirm")]))})})),jsb.reflection.callStaticMethod("ApplePayUtils","requestProducts:",JSON.stringify({identifiers:d,callback:r.default.push(function(e){l.default.getInstance().active=!1;var n=JSON.parse(e);if(n.products&&n.products.length>=3){t.m_products=n.products;for(var i=0,o=n.products;i<o.length;i++){var c=o[i];for(var a in d){var r=d[a];if(c.productIdentifier===r){t.m_buttons[a]&&t.initButton(t.m_buttons[a],c);break}}}}else u.default.showAlert(s.default.getValue("#request_products_failed_title"),s.default.getValue("#request_products_failed_content"),[s.default.getValue("#btn_confirm")]),t.node.destroy()})})))},e.prototype.onDestroy=function(){},e.prototype.onClickDonate=function(t,e){var n=parseInt(e),i=d[n];i&&this.findProduct(i)&&(jsb.reflection.callStaticMethod("ApplePayUtils","payment:",JSON.stringify({identifier:i})),l.default.getInstance().active=!0)},e.prototype.onClickClose=function(){this.node.destroy()},e.prototype.initButton=function(t,e){var n=t.getChildByName("Label").getComponent(cc.Label);if(e){var i="";-1===e.price.indexOf(".")&&(i=".00"),n.string=""+e.currencySymbol+e.price+i+" "+e.localizedTitle}else n.string=s.default.getValue("#loading")},e.prototype.initButtons=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];this.initButton(i)}},e.prototype.findProduct=function(t){for(var e=0,n=this.m_products;e<n.length;e++){var i=n[e];if(i.productIdentifier===t)return i}return null},__decorate([c(cc.Label)],e.prototype,"labelTitle",void 0),__decorate([c(cc.Label)],e.prototype,"labelClose",void 0),__decorate([c(cc.Node)],e.prototype,"btnDonateWater",void 0),__decorate([c(cc.Node)],e.prototype,"btnDonateCoffee",void 0),__decorate([c(cc.Node)],e.prototype,"btnDonateNoodles",void 0),e=__decorate([o],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../App":"App","../native/AnalyticsUtils":"AnalyticsUtils","../native/NativeResponse":"NativeResponse","../utils/Utils":"Utils","../utils/i18n/Localized":"Localized"}],TestAnalytiesUtils:[function(t,e,n){"use strict";cc._RF.push(e,"79203gytg9FC4kQPmAZzF59","TestAnalytiesUtils"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator.ccclass,o=t("../native/AnalyticsUtils"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onClickPageAppear=function(){o.default.trackPageAppear("testPage")},e.prototype.onClickPageDisappear=function(){o.default.trackPageDisappear("testPage")},e.prototype.onClickTrackEvent=function(){o.default.trackEvent("testEvent")},e.prototype.onClickTrackEventWithProperties=function(){o.default.trackEvent("testEvent",{key1:"value1",key2:"value2"})},e.prototype.onClickTrackEventDurationBegin=function(){o.default.trackEventDurationBegin("testEvent")},e.prototype.onClickTrackEventDurationEnd=function(){o.default.trackEventDurationEnd("testEvent")},e.prototype.onClickTrackEventDuration=function(){o.default.trackEventWithDuration("testEvent",10)},e=__decorate([i],e)}(cc.Component);n.default=c,cc._RF.pop()},{"../native/AnalyticsUtils":"AnalyticsUtils"}],Utils:[function(t,e,n){"use strict";cc._RF.push(e,"df5c9qTc/dIuK3FOGI4tAeI","Utils"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../native/NativeResponse"),o=function(){function t(){}return t.captureScreen=function(t,e){var n=new cc.Node;n.parent=t,n.width=t.getContentSize().width,n.height=t.getContentSize().height;var i=n.addComponent(cc.Camera),o=new cc.RenderTexture;o.initWithSize(n.width,n.height),i.targetTexture=o,t.scaleY=-1,i.render(n.parent),t.scaleY=1;var c=o.readPixels(),a=o.width,s=o.height,r=e;jsb.fileUtils.isFileExist(r)&&jsb.fileUtils.removeFile(r);var l=jsb.saveImageData(c,a,s,r);return n.destroy(),l},t.showAlert=function(t,e,n,o){var c=[];n.forEach(function(t){c.push({title:t,style:0})}),jsb.reflection.callStaticMethod("QXQUtils","showAlert:",JSON.stringify({title:t,message:e,buttons:c,callback:i.default.push(function(t){if(o){var e=JSON.parse(t);o(e.idx)}})}))},t}();n.default=o,cc._RF.pop()},{"../native/NativeResponse":"NativeResponse"}]},{},["AnswersConstants","AnswersDictionary","App","LocalizedDictionary","MainNode","AnalyticsUtils","NativeResponse","TestAnalytiesUtils","ActivityNode","DeveloperInfo","EvaluateAnimation","PurchaseInfo","ButtonUtils","Utils","Localized"]);
//# sourceMappingURL=project.js.map